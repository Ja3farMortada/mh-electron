import{a as ie,b as oe}from"./chunk-UHQYT7O6.js";import{a as ee,b as te}from"./chunk-K5EGCQLI.js";import{i as Y,j as Z,m as $}from"./chunk-DNVA5LVB.js";import{b as O,c as q}from"./chunk-UQQFQ63C.js";import{$b as I,$c as X,Ba as h,Ca as p,Da as a,Fc as W,G as m,Gc as j,H as x,Hc as J,Ic as K,Ma as l,N as w,O as u,P as d,Qa as y,Ra as F,Sa as T,Sb as E,T as c,Ua as k,Va as _,Wa as M,_c as Q,aa as f,dc as L,fc as v,hc as P,ic as B,ka as S,ma as s,mc as G,oc as U,pa as D,pc as z,qb as V,qc as A,rc as H,tc as R,v as b,va as n,wa as o,xa as C,xb as N}from"./chunk-E4UPHNBD.js";var se=()=>({width:"55vw"}),ae=()=>({"1199px":"55vw","575px":"95vw"}),le=i=>({"ng-invalid ng-dirty":i});function me(i,ne){if(i&1){let e=h();n(0,"form",3),p("ngSubmit",function(){u(e);let t=a();return d(t.submitCustomer())}),n(1,"div",4)(2,"div",5)(3,"label",6),l(4,"Customer Name"),o(),C(5,"input",7),o(),n(6,"div",5)(7,"label",8),l(8,"Customer Phone"),o(),C(9,"p-inputMask",9),o(),n(10,"div",5)(11,"label"),l(12,"Default Price"),o(),C(13,"p-dropdown",10),o(),n(14,"div",11)(15,"label",12),l(16,"Address"),o(),n(17,"textarea",13),l(18,"                    "),o()()()()}if(i&2){let e=a();s("formGroup",e.customerForm),f(5),s("ngClass",M(4,le,e.f.name.invalid&&(e.f.name.dirty||e.f.name.touched))),f(8),s("options",e.priceOptions)("autoOptionFocus",!1)}}function pe(i,ne){if(i&1){let e=h();n(0,"p-button",14),p("onClick",function(){u(e);let t=a();return d(t.closeDialog())}),o(),n(1,"p-button",15),p("onClick",function(){u(e);let t=a();return d(t.submitCustomer())}),o()}if(i&2){let e=a();f(),s("loading",e.submitLoading)}}var Be=(()=>{class i{constructor(){this.confirmationService=m(E),this.fb=m(H),this.apiService=m(q),this.notification=m(O),this.visible=!1,this.mode="add",this.customer=null,this.visibleChange=new c,this.onCreate=new c,this.onUpdate=new c,this.priceOptions=[{name:"\u0645\u0641\u0631\u0642",value:"retail"},{name:"\u062C\u0645\u0644\u0629 \u0627\u0644\u062C\u0645\u0644\u0629",value:"grand"},{name:"\u062C\u0645\u0644\u0629",value:"wholesale"},{name:"\u0622\u062E\u0631 \u0633\u0639\u0631",value:"last"}],this.customerForm=this.fb.group({account_id:[null],name:[null,v.required],phone:[null],address:[null],default_price:["retail",v.required]}),this.submitLoading=!1,this.submitted=!1}ngOnChanges(e){e.visible&&(this.mode==="edit"?this.customerForm.patchValue(this.customer):this.customerForm.reset({default_price:"retail"}))}get f(){return this.customerForm.controls}closeDialog(){this.submitted=!1,this.visibleChange.emit(!1)}submitCustomer(){if(this.submitted=!0,this.customerForm.valid){this.submitLoading=!0;let e=this.customerForm.getRawValue();(this.mode=="add"?this.apiService.post("customers",e):this.apiService.put("customers",e)).pipe(b(()=>{this.submitLoading=!1})).subscribe({next:t=>{this.mode=="add"?this.onCreate.emit(t):this.onUpdate.emit(t),this.closeDialog(),this.notification.showSuccess()}})}}select(e){e.select()}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=x({type:i,selectors:[["customer-dialog"]],inputs:{visible:"visible",mode:"mode",customer:"customer"},outputs:{visibleChange:"visibleChange",onCreate:"onCreate",onUpdate:"onUpdate"},standalone:!0,features:[w,k],decls:3,vars:7,consts:[["position","top","header","Customer","styleClass","p-fluid",3,"visibleChange","onHide","visible","modal","breakpoints"],["pTemplate","content"],["pTemplate","footer"],[3,"ngSubmit","formGroup"],[1,"formgrid","grid"],[1,"field","col-12","md:col-4"],["for","name"],["id","name","type","text","pInputText","","formControlName","name","autocomplete","off","spellcheck","false",1,"p-inputtext-sm",3,"ngClass"],["for","phone"],["mask","99999999","formControlName","phone","styleClass","p-inputtext-sm"],["formControlName","default_price","appendTo","body","optionLabel","name","optionValue","value","placeholder","Default Price","styleClass","p-inputtext-sm","required","",3,"options","autoOptionFocus"],[1,"field","col-12","md:col-12"],["for","address"],["id","address","name","address","rows","3","pInputTextarea","","formControlName","address","spellcheck","false"],["label","Cancel","icon","pi pi-times","severity","secondary","size","small",3,"onClick"],["label","Save","icon","pi pi-check","severity","success","size","small",3,"onClick","loading"]],template:function(r,t){r&1&&(n(0,"p-dialog",0),T("visibleChange",function(g){return F(t.visible,g)||(t.visible=g),g}),p("onHide",function(){return t.closeDialog()}),S(1,me,19,6,"ng-template",1)(2,pe,2,1,"ng-template",2),o()),r&2&&(D(_(5,se)),y("visible",t.visible),s("modal",!0)("breakpoints",_(6,ae)))},dependencies:[X,Q,I,j,W,R,G,L,P,B,A,U,z,N,V,K,J,oe,ie,te,ee,$,Z,Y]})}}return i})();export{Be as a};
