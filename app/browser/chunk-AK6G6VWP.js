import{a as Q}from"./chunk-GXNMPK5K.js";import{a as ie}from"./chunk-N5J4AUQI.js";import{a as q}from"./chunk-Z3UO65U3.js";import{C as Z,D as ee,F as te,v as $,w as J,x as X,y as Y}from"./chunk-DNVA5LVB.js";import{$b as z,$c as K,Ba as y,Ca as h,Da as p,Fc as U,G as w,Gc as A,H as k,Hc as N,Ia as V,Ic as j,Ja as F,Ka as L,La as P,Ma as s,Na as M,O as _,Oa as d,P as u,Qa as T,Ra as D,Sa as E,T as v,Ua as B,Va as x,_c as G,a as I,aa as r,cb as b,db as C,ka as g,ma as a,pa as R,sb as H,va as l,vb as O,wa as o,xa as f,xb as W}from"./chunk-E4UPHNBD.js";var ne=["tableSearch"],oe=()=>({width:"75vw"}),le=()=>({"1199px":"85vw","575px":"95vw"}),re=()=>["product_name"],ae=()=>[10,15,50,100];function pe(e,c){e&1&&(l(0,"th"),s(1," \u0627\u0644\u0643\u0644\u0641\u0629 "),o())}function ce(e,c){e&1&&(l(0,"th"),s(1," \u062C\u0645\u0644\u0629 \u0627\u0644\u062C\u0645\u0644\u0629 "),o())}function se(e,c){e&1&&(l(0,"th"),s(1,"\u062C\u0645\u0644\u0629"),o())}function me(e,c){e&1&&(l(0,"th"),s(1,"\u0645\u0641\u0631\u0642"),o())}function _e(e,c){if(e&1&&(l(0,"tr")(1,"th",15),f(2,"p-tableHeaderCheckbox"),o(),l(3,"th",16),s(4," Description"),f(5,"p-sortIcon",17),o(),g(6,pe,2,0,"th",18)(7,ce,2,0,"th",18)(8,se,2,0,"th",18)(9,me,2,0,"th",18),o()),e&2){let t,i=p(2);r(6),a("ngIf",((t=i.userPermissions())==null?null:t.view_cost)||!1),r(),a("ngIf",i.price==="grandwhole_price_usd"),r(),a("ngIf",i.price==="whole_price_usd"),r(),a("ngIf",i.price==="unit_price_usd")}}function ue(e,c){if(e&1&&(l(0,"td"),s(1),b(2,"currency"),o()),e&2){let t=p().$implicit;r(),d(" ",C(2,1,t.unit_cost_usd)," ")}}function de(e,c){if(e&1&&(l(0,"td"),s(1),b(2,"currency"),o()),e&2){let t=p().$implicit;r(),d(" ",C(2,1,t.grandwhole_price_usd)," ")}}function ge(e,c){if(e&1&&(l(0,"td"),s(1),b(2,"currency"),o()),e&2){let t=p().$implicit;r(),d(" ",C(2,1,t.whole_price_usd)," ")}}function fe(e,c){if(e&1&&(l(0,"td"),s(1),b(2,"currency"),o()),e&2){let t=p().$implicit;r(),d(" ",C(2,1,t.unit_price_usd)," ")}}function he(e,c){if(e&1&&(l(0,"tr",19)(1,"td"),f(2,"p-tableCheckbox",20),o(),l(3,"td"),s(4),o(),g(5,ue,3,3,"td",18)(6,de,3,3,"td",18)(7,ge,3,3,"td",18)(8,fe,3,3,"td",18),o()),e&2){let t,i=c.$implicit,n=p(2);a("pSelectableRow",i),r(2),a("pSelectableRow",i)("value",i),r(2),M(i.product_name),r(),a("ngIf",((t=n.userPermissions())==null?null:t.view_cost)||!1),r(),a("ngIf",n.price==="grandwhole_price_usd"),r(),a("ngIf",n.price==="whole_price_usd"),r(),a("ngIf",n.price==="unit_price_usd")}}function xe(e,c){e&1&&(l(0,"tr")(1,"td",21),s(2,"No items yet!"),o()())}function be(e,c){if(e&1){let t=y();l(0,"div",5)(1,"div",6)(2,"span",7),f(3,"i",8),l(4,"input",9,0),h("input",function(n){_(t);let m=P(10);return u(m.filterGlobal(n.target.value,"contains"))}),o()()(),l(6,"div",6)(7,"h3",10),s(8),o()()(),l(9,"p-table",11,1),E("selectionChange",function(n){_(t);let m=p();return D(m.selectedProducts,n)||(m.selectedProducts=n),u(n)}),h("onRowSelect",function(){_(t);let n=p();return u(n.selectInput())})("onRowUnselect",function(){_(t);let n=p();return u(n.selectInput())}),g(11,_e,10,4,"ng-template",12)(12,he,9,8,"ng-template",13)(13,xe,3,0,"ng-template",14),o()}if(e&2){let t=P(10),i=p();r(4),a("value",t.filters.global==null?null:t.filters.global.value),r(4),d(" Total Selected: ",i.selectedProducts.length," "),r(),a("value",i.products()),T("selection",i.selectedProducts),a("loading",i.tableLoading)("globalFilterFields",x(12,re))("filterDelay",0)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",x(13,ae))("alwaysShowPaginator",!0)}}function Ce(e,c){if(e&1){let t=y();l(0,"p-button",22),h("onClick",function(){_(t);let n=p();return u(n.closeDialog())}),o(),l(1,"p-button",23),h("onClick",function(){_(t);let n=p();return u(n.submitProducts())}),o()}if(e&2){let t=p();r(),a("disabled",t.selectedProducts.length==0)}}var Ue=(()=>{class e{constructor(){this.authService=w(Q),this.stockService=this.authService.isAdmin()?w(ie):w(q),this.visible=!1,this.tableLoading=!1,this.price="unit_price_usd",this.onSubmit=new v,this.onHide=new v,this.subscriptions=new I,this.selectedProducts=[],this.userPermissions=this.authService.userPermissions}submitProducts(){this.onSubmit.emit(this.selectedProducts),this.closeDialog()}closeDialog(){this.selectedProducts=[],this.onHide.emit(!1)}print(){window.print()}getPriceTypeLabel(t){return t?{unit_price_usd:"\u0645\u0641\u0631\u0642",whole_price_usd:"\u062C\u0645\u0644\u0629",grandwhole_price_usd:"\u062C\u0645\u0644\u0629 \u0627\u0644\u062C\u0645\u0644\u0629",latest:"\u0622\u062E\u0631 \u0633\u0639\u0631"}[t]:"\u0634\u0631\u0627\u0621"}selectInput(){this.tableSearch.nativeElement.select()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=k({type:e,selectors:[["products-dialog"]],viewQuery:function(i,n){if(i&1&&V(ne,5),i&2){let m;F(m=L())&&(n.tableSearch=m.first)}},inputs:{visible:"visible",products:"products",tableLoading:"tableLoading",price:"price"},outputs:{onSubmit:"onSubmit",onHide:"onHide"},standalone:!0,features:[B],decls:3,vars:11,consts:[["tableSearch",""],["dt",""],["position","top","styleClass","p-fluid",3,"visibleChange","header","modal","visible","breakpoints","closeOnEscape","closable","maximizable"],["pTemplate","content"],["pTemplate","footer"],[1,"grid","mb-2"],[1,"col-6"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","search","placeholder","Search ...",1,"p-inputtext-sm",3,"input","value"],[1,"text-center","m-0"],["selectionMode","multiple","dataKey","product_id","styleClass","p-datatable-sm","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} records",3,"selectionChange","onRowSelect","onRowUnselect","value","selection","loading","globalFilterFields","filterDelay","paginator","rows","showCurrentPageReport","rowsPerPageOptions","alwaysShowPaginator"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[2,"width","3rem"],["pSortableColumn","product_name"],["field","product_name"],[4,"ngIf"],[3,"pSelectableRow"],[3,"pSelectableRow","value"],["colspan","6"],["size","small","severity","secondary","label","Cancel","icon","pi pi-times",3,"onClick"],["size","small","label","Finish","icon","pi pi-check","severity","success",3,"onClick","disabled"]],template:function(i,n){i&1&&(l(0,"p-dialog",2),E("visibleChange",function(S){return D(n.visible,S)||(n.visible=S),S}),g(1,be,14,14,"ng-template",3)(2,Ce,2,1,"ng-template",4),o()),i&2&&(R(x(9,oe)),a("header","Select Items ("+n.getPriceTypeLabel(n.price)+")")("modal",!0),T("visible",n.visible),a("breakpoints",x(10,le))("closeOnEscape",!1)("closable",!1)("maximizable",!0))},dependencies:[te,$,z,J,Y,X,Z,ee,A,U,K,G,O,W,H,j,N],styles:["[_nghost-%COMP%]  .p-dialog-content{padding-top:.5rem}"]})}}return e})();export{Ue as a};
