import{a as y}from"./chunk-GSMGX6RX.js";import{b as l,c as d}from"./chunk-UQQFQ63C.js";import{C as n,G as h,ha as i,v as r,zb as m}from"./chunk-E4UPHNBD.js";var H=(()=>{class o{constructor(){this.api=h(d),this.http=h(m),this.notificationsService=h(l),this.dateService=h(y),this.host=this.api.host,this.startDate=i(this.dateService.getStartOfMonth(!0)),this.endDate=i(this.dateService.getEndOfDay()),this.revenue=i({}),this.revenue_loading=i(!1),this.returns=i({}),this.returns_loading=i(!1),this.disposes=i({}),this.disposes_loading=i(!1),this.totalOrdersLoading=i(!1),this.totalOrders=i({}),this.debts=i({}),this.loadingDebts=i(!1),this.customerPayments=i({}),this.loadingCustomerPayments=i(!1),this.cashBalance=i({}),this.loadingCashBalance=i(!1),this.manualCashTransactions=i({}),this.loadingManualCashTransactions=i(!1),this.loadingExpenses=i(!1),this.expenses=i({}),this.loadingSupplierPayments=i(!1),this.supplierPayments=i({}),this.loadingTopSales=i(!1),this.topSales=i([]),this.selectedProduct=i(null),this.topCategories=i([])}getRevenue(e,s){this.revenue_loading.set(!0),e=this.dateService.formatDate(e,"yyyy-MM-dd HH:mm:ss"),s=this.dateService.formatDate(s,"yyyy-MM-dd HH:mm:ss"),this.http.get(`${this.host}/report/revenue/${e}&${s}`).subscribe({next:t=>{this.revenue.set(t)},error:t=>{this.notificationsService.showError(t,"home"),this.revenue_loading.set(!1)},complete:()=>{this.revenue_loading.set(!1)}})}getReturns(e,s){e=this.dateService.formatDate(e,"yyyy-MM-dd HH:mm:ss"),s=this.dateService.formatDate(s,"yyyy-MM-dd HH:mm:ss"),this.returns_loading.set(!0),this.http.get(`${this.host}/report/returns/${e}&${s}`).subscribe({next:t=>{this.returns.set(t)},error:t=>{this.notificationsService.showError(t,"home"),this.returns_loading.set(!1)},complete:()=>{this.returns_loading.set(!1)}})}getDisposes(e,s){e=this.dateService.formatDate(e,"yyyy-MM-dd HH:mm:ss"),s=this.dateService.formatDate(s,"yyyy-MM-dd HH:mm:ss"),this.disposes_loading.set(!0),this.http.get(`${this.host}/report/disposes/${e}&${s}`).subscribe({next:t=>{this.disposes.set(t)},error:t=>{this.notificationsService.showError(t,"home"),this.disposes_loading.set(!1)},complete:()=>{this.disposes_loading.set(!1)}})}getTotalOrders(e=this.startDate(),s=this.endDate()){e=this.dateService.formatDate(e,"yyyy-MM-dd HH:mm:ss"),s=this.dateService.formatDate(s,"yyyy-MM-dd HH:mm:ss"),this.totalOrdersLoading.set(!0),this.http.get(`${this.host}/report/total-orders/${e}&${s}`).pipe(r(()=>{this.totalOrdersLoading.set(!1)})).subscribe({next:t=>{this.totalOrders.set(t),console.log(t)},error:t=>{this.notificationsService.showError(t,"home")}})}getDebts(e,s){e=this.dateService.formatDate(e,"yyyy-MM-dd HH:mm:ss"),s=this.dateService.formatDate(s,"yyyy-MM-dd HH:mm:ss"),this.loadingDebts.set(!0),this.http.get(`${this.host}/report/debts/${e}&${s}`).pipe(r(()=>{this.loadingDebts.set(!1)})).subscribe({next:t=>{this.debts.set(t)},error:t=>{this.notificationsService.showError(t,"home")}})}getCustomerPayments(e,s){e=this.dateService.formatDate(e,"yyyy-MM-dd HH:mm:ss"),s=this.dateService.formatDate(s,"yyyy-MM-dd HH:mm:ss"),this.loadingCustomerPayments.set(!0),this.http.get(`${this.host}/report/customer-payments/${e}&${s}`).pipe(r(()=>{this.loadingCustomerPayments.set(!1)})).subscribe({next:t=>{this.customerPayments.set(t)},error:t=>{this.notificationsService.showError(t,"home")}})}getCashBalance(e,s){this.loadingCashBalance.set(!0),e=this.dateService.formatDate(e,"yyyy-MM-dd HH:mm:ss"),s=this.dateService.formatDate(s,"yyyy-MM-dd HH:mm:ss"),this.http.get(`${this.host}/report/cash/${e}&${s}`).pipe(r(()=>{this.loadingCashBalance.set(!1)})).subscribe({next:t=>{this.cashBalance.set(t)},error:t=>{this.notificationsService.showError(t,"home")}})}getManualCashTransactions(e,s){e=this.dateService.formatDate(e,"yyyy-MM-dd HH:mm:ss"),s=this.dateService.formatDate(s,"yyyy-MM-dd HH:mm:ss"),this.loadingManualCashTransactions.set(!0),this.http.get(`${this.host}/report/manual-cash/${e}&${s}`).pipe(r(()=>{this.loadingManualCashTransactions.set(!1)})).subscribe({next:t=>{this.manualCashTransactions.set(t)},error:t=>{this.notificationsService.showError(t,"home")}})}getExpenses(e,s){e=this.dateService.formatDate(e,"yyyy-MM-dd HH:mm:ss"),s=this.dateService.formatDate(s,"yyyy-MM-dd HH:mm:ss"),this.loadingExpenses.set(!0),this.http.get(`${this.host}/report/expenses/${e}&${s}`).subscribe({next:t=>{this.expenses.set(t)},error:t=>{this.notificationsService.showError(t,"home"),this.loadingExpenses.set(!1)},complete:()=>{this.loadingExpenses.set(!1)}})}getSupplierPayments(e,s){e=this.dateService.formatDate(e,"yyyy-MM-dd HH:mm:ss"),s=this.dateService.formatDate(s,"yyyy-MM-dd HH:mm:ss"),this.loadingSupplierPayments.set(!0),this.http.get(`${this.host}/report/supplier-payments/${e}&${s}`).subscribe({next:t=>{this.supplierPayments.set(t)},error:t=>{this.notificationsService.showError(t,"home"),this.loadingSupplierPayments.set(!1)},complete:()=>{this.loadingSupplierPayments.set(!1)}})}getTopSales(e,s,t=this.selectedProduct()){e=this.dateService.formatDate(e,"yyyy-MM-dd HH:mm:ss"),s=this.dateService.formatDate(s,"yyyy-MM-dd HH:mm:ss"),this.loadingTopSales.set(!0),this.http.get(`${this.host}/report/top-sales/${e}&${s}&${t}`).subscribe({next:a=>{this.topSales.set(a),this.loadingTopSales.set(!1)},error:a=>{this.notificationsService.showError(a,"home"),this.loadingTopSales.set(!1)}})}getTopCategories(e,s){e=this.dateService.formatDate(e,"yyyy-MM-dd HH:mm:ss"),s=this.dateService.formatDate(s,"yyyy-MM-dd HH:mm:ss"),this.http.get(`${this.host}/report/categories/${e}&${s}`).subscribe({next:t=>{this.topCategories.set(t)},error:t=>{this.notificationsService.handleError(t.error,"home")}})}static{this.\u0275fac=function(s){return new(s||o)}}static{this.\u0275prov=n({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();export{H as a};
