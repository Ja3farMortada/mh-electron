import{a as ae}from"./chunk-LHXBPRE2.js";import{a as le}from"./chunk-I4Y3OHQI.js";import{b as se}from"./chunk-SYILSIKQ.js";import{a as ee,b as te}from"./chunk-WUDXH4RE.js";import{i as ie,j as oe,l as ne,m as re}from"./chunk-DNVA5LVB.js";import{b as M,c as U}from"./chunk-SFMGPKFH.js";import{$b as I,$c as X,Ba as F,Ca as p,Da as d,Fc as R,G as g,Gc as j,H as V,Hc as Q,Ic as J,Ma as s,N as D,O as c,P as _,Qa as S,Ra as w,Sa as x,T as C,Ua as N,Va as T,Wa as h,Xa as Z,_c as K,aa as l,dc as q,fc as y,hc as W,ic as L,ka as b,ma as r,mc as G,oc as O,pa as E,pc as z,qb as B,rc as H,sb as $,tc as A,v as k,va as n,wa as o,xa as u,xb as P}from"./chunk-E4UPHNBD.js";var be=()=>({width:"30vw"}),he=t=>({"ng-invalid ng-dirty":t});function ye(t,f){if(t&1){let e=F();n(0,"form",3),p("ngSubmit",function(){c(e);let i=d();return _(i.submitBrand())}),n(1,"div",4)(2,"label",5),s(3,"Brand Name"),o(),u(4,"input",6),o()()}if(t&2){let e=d();r("formGroup",e.brandForm),l(4),r("ngClass",h(2,he,e.f.brand_name.invalid&&(e.f.brand_name.dirty||e.f.brand_name.touched)))}}function ve(t,f){if(t&1){let e=F();n(0,"p-button",7),p("onClick",function(){c(e);let i=d();return _(i.closeBrandDialog())}),o(),n(1,"p-button",8),p("onClick",function(){c(e);let i=d();return _(i.submitBrand())}),o()}if(t&2){let e=d();l(),r("loading",e.submitLoading)}}var ge=(()=>{class t{constructor(){this.fb=g(H),this.notification=g(M),this.api=g(U),this.visible=!1,this.brand=null,this.visibleChange=new C,this.onCreate=new C,this.onUpdate=new C,this.submitLoading=!1,this.submitted=!1,this.brandForm=this.fb.group({brand_id:[null],brand_name:[null,y.required]})}ngOnChanges(e){e.visible&&this.visible&&(this.mode=="edit"?this.brandForm.patchValue(this.brand):this.brandForm.reset())}get f(){return this.brandForm.controls}closeBrandDialog(){this.submitted=!1,this.visibleChange.emit(!1)}submitBrand(){if(this.submitted=!0,this.brandForm.valid){this.submitLoading=!0;let e=this.brandForm.getRawValue();(this.mode=="add"?this.api.post("admin-stock/brands",e):this.api.put("admin-stock/brands",e)).pipe(k(()=>{this.submitLoading=!1})).subscribe({next:i=>{this.mode=="add"?this.onCreate.emit(i):this.onUpdate.emit(i),this.closeBrandDialog(),this.notification.showSuccess()}})}}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275cmp=V({type:t,selectors:[["brand-form"]],inputs:{visible:"visible",mode:"mode",brand:"brand"},outputs:{visibleChange:"visibleChange",onCreate:"onCreate",onUpdate:"onUpdate"},standalone:!0,features:[D,N],decls:3,vars:5,consts:[["header","Brand","styleClass","p-fluid",3,"visibleChange","onHide","visible","modal"],["pTemplate","content"],["pTemplate","footer"],[3,"ngSubmit","formGroup"],[1,"field","mt-1"],["for","name"],["type","text","pInputText","","formControlName","brand_name","spellcheck","false",3,"ngClass"],["label","Cancel","icon","pi pi-times","severity","secondary","size","small",3,"onClick"],["label","Save","icon","pi pi-check","severity","success","size","small",3,"onClick","loading"]],template:function(a,i){a&1&&(n(0,"p-dialog",0),x("visibleChange",function(m){return w(i.visible,m)||(i.visible=m),m}),p("onHide",function(){return i.closeBrandDialog()}),b(1,ye,5,4,"ng-template",1)(2,ve,2,1,"ng-template",2),o()),a&2&&(E(T(4,be)),S("visible",i.visible),r("modal",!0))},dependencies:[P,B,A,G,q,W,L,O,z,X,K,I,j,R,J,Q]})}}return t})();var Fe=()=>({width:"35vw"}),Se=()=>({"1199px":"75vw","575px":"85vw"}),we=t=>({"ng-invalid ng-dirty":t});function xe(t,f){if(t&1){let e=F();n(0,"form",3),p("ngSubmit",function(){c(e);let i=d();return _(i.submitCategory())}),n(1,"div",4)(2,"label",5),s(3,"Category Name"),o(),u(4,"input",6),o()()}if(t&2){let e=d();r("formGroup",e.categoryForm),l(4),r("ngClass",h(2,we,e.f.category_name.invalid&&(e.f.category_name.dirty||e.f.category_name.touched)))}}function Te(t,f){if(t&1){let e=F();n(0,"p-button",7),p("onClick",function(){c(e);let i=d();return _(i.closeCategoryDialog())}),o(),n(1,"p-button",8),p("onClick",function(){c(e);let i=d();return _(i.submitCategory())}),o()}if(t&2){let e=d();l(),r("loading",e.submitLoading)}}var Ce=(()=>{class t{constructor(){this.fb=g(H),this.api=g(U),this.notification=g(M),this.visible=!1,this.category=null,this.visibleChange=new C,this.onCreate=new C,this.onUpdate=new C,this.submitLoading=!1,this.submitted=!1,this.categoryForm=this.fb.group({category_id:[null],category_name:[null,y.required],show_on_sell:[!1]})}ngOnChanges(e){e.visible&&this.visible&&(this.mode=="edit"?this.categoryForm.patchValue(this.category):this.categoryForm.reset({show_on_sell:!1}))}get f(){return this.categoryForm.controls}closeCategoryDialog(){this.submitted=!1,this.visibleChange.emit(!1)}submitCategory(){if(this.submitted=!0,this.categoryForm.valid){this.submitLoading=!0;let e=this.categoryForm.getRawValue();(this.mode=="add"?this.api.post("admin-stock/categories",e):this.api.put("admin-stock/categories",e)).pipe(k(()=>{this.submitLoading=!1})).subscribe({next:i=>{this.mode=="add"?this.onCreate.emit(i):this.onUpdate.emit(i),this.closeCategoryDialog(),this.notification.showSuccess()}})}}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275cmp=V({type:t,selectors:[["category-form"]],inputs:{visible:"visible",mode:"mode",category:"category"},outputs:{visibleChange:"visibleChange",onCreate:"onCreate",onUpdate:"onUpdate"},standalone:!0,features:[D,N],decls:3,vars:7,consts:[["header","Category","styleClass","p-fluid",3,"visibleChange","onHide","visible","modal","breakpoints"],["pTemplate","content"],["pTemplate","footer"],[3,"ngSubmit","formGroup"],[1,"field","mt-1"],["for","name"],["type","text","pInputText","","formControlName","category_name","spellcheck","false",3,"ngClass"],["label","Cancel","icon","pi pi-times","severity","secondary","size","small",3,"onClick"],["label","Save","icon","pi pi-check","severity","success","size","small",3,"onClick","loading"]],template:function(a,i){a&1&&(n(0,"p-dialog",0),x("visibleChange",function(m){return w(i.visible,m)||(i.visible=m),m}),p("onHide",function(){return i.closeCategoryDialog()}),b(1,xe,5,4,"ng-template",1)(2,Te,2,1,"ng-template",2),o()),a&2&&(E(T(5,Fe)),S("visible",i.visible),r("modal",!0)("breakpoints",T(6,Se)))},dependencies:[P,B,X,K,I,j,R,J,Q,A,G,q,W,L,O,z,se]})}}return t})();var ke=()=>({width:"75vw"}),Ve=()=>({"1199px":"85vw","575px":"90vw"}),Y=t=>({"ng-invalid ng-dirty":t}),De=(t,f)=>({"col-9 md:col-2":t,"col-12 md:col-3":f});function Ee(t,f){t&1&&(n(0,"small",35),s(1,"Cost is required."),o())}function Ne(t,f){t&1&&(n(0,"div",36)(1,"label",37),s(2,"Avg cost ?"),o(),u(3,"br")(4,"p-checkbox",38),o()),t&2&&(l(4),r("binary",!0))}function Be(t,f){t&1&&(n(0,"small",35),s(1,"Grand wholesale is required."),o())}function Pe(t,f){t&1&&(n(0,"small",35),s(1,"Wholesale is required."),o())}function Ie(t,f){t&1&&(n(0,"small",35),s(1,"Price is required."),o())}function Me(t,f){t&1&&(n(0,"div",24)(1,"label",39),s(2,"Initial Qty"),o(),u(3,"p-inputNumber",40),o())}function Ue(t,f){if(t&1){let e=F();n(0,"form",4),p("ngSubmit",function(){c(e);let i=d();return _(i.submitProduct())}),n(1,"div",5)(2,"div",6)(3,"label",7),s(4,"Product Name"),n(5,"span",8),s(6,"*"),o()(),u(7,"input",9),o(),n(8,"div",10)(9,"label"),s(10,"Code"),o(),u(11,"input",11),o(),n(12,"div",12)(13,"label",13),s(14,"Category"),o(),u(15,"p-dropdown",14),o(),n(16,"div",15)(17,"p-button",16),p("onClick",function(){c(e);let i=d();return _(i.categoryDialogVisible=!0)}),o()(),n(18,"div",12)(19,"label",17),s(20,"Brand"),o(),u(21,"p-dropdown",18),o(),n(22,"div",15)(23,"p-button",16),p("onClick",function(){c(e);let i=d();return _(i.brandDialogVisible=!0)}),o()(),n(24,"div",19)(25,"label",20),s(26,"Unit Cost (\u0627\u0644\u0643\u0644\u0641\u0629)"),n(27,"span",8),s(28,"*"),o()(),u(29,"p-inputNumber",21),b(30,Ee,2,0,"small",22),o(),b(31,Ne,5,1,"div",23),n(32,"div",24)(33,"label",25),s(34,"Grand wholesale (\u062C\u0645\u0644\u0629 \u0627\u0644\u062C\u0645\u0644\u0629)"),n(35,"span",8),s(36,"*"),o()(),u(37,"p-inputNumber",26),b(38,Be,2,0,"small",22),o(),n(39,"div",24)(40,"label",27),s(41,"Wholesale (\u062C\u0645\u0644\u0629)"),n(42,"span",8),s(43,"*"),o()(),u(44,"p-inputNumber",28),b(45,Pe,2,0,"small",22),o(),n(46,"div",24)(47,"label",29),s(48,"Unit price (\u0645\u0641\u0631\u0642)"),n(49,"span",8),s(50,"*"),o()(),u(51,"p-inputNumber",30),b(52,Ie,2,0,"small",22),o(),b(53,Me,4,0,"div",31),n(54,"div",32)(55,"label",33),s(56,"Notes"),o(),u(57,"input",34),o()()()}if(t&2){let e=d();r("formGroup",e.productForm),l(7),r("ngClass",h(21,Y,e.submitted&&e.f.product_name.invalid&&(e.f.product_name.dirty||e.f.product_name.touched))),l(8),r("options",e.categories())("showClear",!0)("autoOptionFocus",!1)("filter",!0),l(6),r("options",e.brands())("showClear",!0)("autoOptionFocus",!1)("filter",!0),l(3),r("ngClass",Z(23,De,e.mode=="edit",e.mode=="add")),l(5),r("ngClass",h(26,Y,e.f.unit_cost_usd.invalid&&(e.f.unit_cost_usd.dirty||e.f.unit_cost_usd.touched||e.submitted))),l(),r("ngIf",e.f.unit_cost_usd.invalid&&(e.f.unit_cost_usd.dirty||e.f.unit_cost_usd.touched||e.submitted)),l(),r("ngIf",e.mode=="edit"),l(6),r("ngClass",h(28,Y,e.f.grandwhole_price_usd.invalid&&(e.f.grandwhole_price_usd.dirty||e.f.grandwhole_price_usd.touched||e.submitted))),l(),r("ngIf",e.f.grandwhole_price_usd.invalid&&(e.f.grandwhole_price_usd.dirty||e.f.grandwhole_price_usd.touched||e.submitted)),l(6),r("ngClass",h(30,Y,e.f.whole_price_usd.invalid&&(e.f.whole_price_usd.dirty||e.f.whole_price_usd.touched||e.submitted))),l(),r("ngIf",e.f.whole_price_usd.invalid&&(e.f.whole_price_usd.dirty||e.f.whole_price_usd.touched||e.submitted)),l(6),r("ngClass",h(32,Y,e.f.unit_price_usd.invalid&&(e.f.unit_price_usd.dirty||e.f.unit_price_usd.touched||e.submitted))),l(),r("ngIf",e.f.unit_price_usd.invalid&&(e.f.unit_price_usd.dirty||e.f.unit_price_usd.touched||e.submitted)),l(),r("ngIf",!e.f.product_id.value)}}function qe(t,f){if(t&1){let e=F();n(0,"p-button",41),p("onClick",function(){c(e);let i=d();return _(i.closeProductDialog())}),o(),n(1,"p-button",42),p("onClick",function(){c(e);let i=d();return _(i.submitProduct())}),o()}if(t&2){let e=d();l(),r("loading",e.loading)}}var Pt=(()=>{class t{constructor(){this.fb=g(H),this.adminStockService=g(le),this.apiService=g(U),this.notificationService=g(M),this.visible=!1,this.product=null,this.selectedProduct=this.adminStockService.selectedItem,this.visibleChange=new C,this.onCreate=new C,this.onUpdate=new C,this.loading=!1,this.submitted=!1,this.categories=this.adminStockService.categories,this.brands=this.adminStockService.brands,this.productForm=this.fb.group({product_id:[null],category_id_fk:[null],brand_id_fk:[null],product_name:[null,y.required],sku:[null],quantity:[null],unit_cost_usd:[null,y.required],change_avg_cost:[!1],grandwhole_price_usd:[null,y.required],whole_price_usd:[null,y.required],unit_price_usd:[null,y.required],product_notes:[null]}),this.categoryDialogVisible=!1,this.brandDialogVisible=!1}ngOnChanges(e){e.visible&&this.visible&&(this.productForm.reset({change_avg_cost:!1}),this.mode==="edit"&&this.productForm.patchValue(this.product))}get f(){return this.productForm.controls}closeProductDialog(){this.submitted=!1,this.visibleChange.emit(!1)}submitProduct(){if(this.submitted=!0,this.productForm.valid){if(this.productForm.invalid)return;this.loading=!0;let e=this.productForm.getRawValue();(e.product_id?this.apiService.put("/admin-stock/items",e):this.apiService.post("admin-stock/items",e)).pipe(k(()=>{this.loading=!1})).subscribe({next:i=>{e.product_id?this.onUpdate.emit(i):this.onCreate.emit(i),this.closeProductDialog(),this.notificationService.showSuccess()}})}}onCreateCategory(e){this.categories.set([...this.categories(),e]),this.productForm.patchValue({category_id_fk:e.category_id})}onCreateBrand(e){this.brands.set([...this.brands(),e]),this.productForm.patchValue({brand_id_fk:e.brand_id})}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275cmp=V({type:t,selectors:[["product-form"]],inputs:{visible:"visible",mode:"mode",product:"product"},outputs:{visibleChange:"visibleChange",onCreate:"onCreate",onUpdate:"onUpdate"},standalone:!0,features:[D,N],decls:5,vars:13,consts:[["position","top","header","Product Form","styleClass","p-fluid",3,"visibleChange","onHide","visible","modal","breakpoints","closable","maximizable"],["pTemplate","content"],["pTemplate","footer"],[3,"visibleChange","onCreate","visible","mode"],[3,"ngSubmit","formGroup"],[1,"formgrid","grid"],[1,"field","col-12","md:col-4"],["for","name"],[1,"text-red-600"],["id","name","type","text","pInputText","","formControlName","product_name","spellcheck","false",3,"ngClass"],[1,"field","col-12","md:col-2"],["type","text","pInputText","","formControlName","sku","spellcheck","false"],[1,"field","col-10","md:col-2"],["for","Category"],["scrollHeight","400px","appendTo","body","formControlName","category_id_fk","optionLabel","category_name","optionValue","category_id","placeholder","Select Category ...","filterBy","category_name",3,"options","showClear","autoOptionFocus","filter"],[1,"field","col-2","md:col-1","align-self-end"],["icon","pi pi-plus","size","small","severity","success",3,"onClick"],["for","Brand"],["scrollHeight","400px","appendTo","body","formControlName","brand_id_fk","optionLabel","brand_name","optionValue","brand_id","placeholder","Select Brand ...","filterBy","brand_name",3,"options","showClear","autoOptionFocus","filter"],[1,"field",3,"ngClass"],["for","unit_cost_usd"],["autoSelect","","formControlName","unit_cost_usd","inputId","currency-us","mode","currency","currency","USD","locale","en-US",3,"ngClass"],["class","p-error",4,"ngIf"],["class","field col-1",4,"ngIf"],[1,"field","col-12","md:col-3"],["for","grandwhole_price_usd"],["autoSelect","","formControlName","grandwhole_price_usd","inputId","currency-us","mode","currency","currency","USD","locale","en-US",3,"ngClass"],["for","whole_price_usd"],["autoSelect","","formControlName","whole_price_usd","inputId","currency-us","mode","currency","currency","USD","locale","en-US",3,"ngClass"],["for","unit_price_usd"],["autoSelect","","formControlName","unit_price_usd","inputId","currency-us","mode","currency","currency","USD","locale","en-US",3,"ngClass"],["class","field col-12 md:col-3",4,"ngIf"],[1,"field","col-12","md:col-9"],["for","product_notes"],["type","text","pInputText","","formControlName","product_notes","spellcheck","false"],[1,"p-error"],[1,"field","col-1"],["for",""],["formControlName","change_avg_cost","inputId","change_avg_cost",3,"binary"],["for","quantity"],["formControlName","quantity","placeholder","Initial Qty"],["label","Cancel","icon","pi pi-times","severity","secondary","size","small",3,"onClick"],["type","submit","label","Save","icon","pi pi-check","severity","success","size","small",3,"onClick","loading"]],template:function(a,i){a&1&&(n(0,"p-dialog",0),x("visibleChange",function(m){return w(i.visible,m)||(i.visible=m),m}),p("onHide",function(){return i.closeProductDialog()}),b(1,Ue,58,34,"ng-template",1)(2,qe,2,1,"ng-template",2),o(),n(3,"category-form",3),x("visibleChange",function(m){return w(i.categoryDialogVisible,m)||(i.categoryDialogVisible=m),m}),p("onCreate",function(m){return i.onCreateCategory(m)}),o(),n(4,"brand-form",3),x("visibleChange",function(m){return w(i.brandDialogVisible,m)||(i.brandDialogVisible=m),m}),p("onCreate",function(m){return i.onCreateBrand(m)}),o()),a&2&&(E(T(11,ke)),S("visible",i.visible),r("modal",!0)("breakpoints",T(12,Ve))("closable",!1)("maximizable",!0),l(3),S("visible",i.categoryDialogVisible),r("mode","add"),l(),S("visible",i.brandDialogVisible),r("mode","add"))},dependencies:[P,B,$,X,K,I,J,Q,re,ne,A,G,q,W,L,O,z,j,R,oe,ie,ae,ge,Ce,te,ee]})}}return t})();export{ge as a,Ce as b,Pt as c};
