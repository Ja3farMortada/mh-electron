import{a as fe,b as Ce,c as z,d as H,e as Se}from"./chunk-5EZTTIDZ.js";import{a as he,b as ve}from"./chunk-ADFLXIFS.js";import{a as we}from"./chunk-MSPS55RF.js";import{b as J}from"./chunk-DKI32LSS.js";import"./chunk-6HTKW57C.js";import{a as O,b as A,c as K}from"./chunk-ISJTSY4Q.js";import"./chunk-XNAPTIXL.js";import"./chunk-LHXBPRE2.js";import{a as $}from"./chunk-6Y6CAQXE.js";import"./chunk-CK6XGA6X.js";import{a as I}from"./chunk-I4Y3OHQI.js";import"./chunk-E67DLZTH.js";import"./chunk-OWTGQR6U.js";import"./chunk-MB5UDTNQ.js";import"./chunk-IZUVX76I.js";import"./chunk-VQ7XAIYI.js";import{b as ye}from"./chunk-SYILSIKQ.js";import"./chunk-WUDXH4RE.js";import{a as j,b as ce}from"./chunk-C5S2HPP5.js";import"./chunk-425U57QI.js";import{b as ue}from"./chunk-7PIM7VCW.js";import"./chunk-GSMGX6RX.js";import{a as G,b as be}from"./chunk-7LKCTRLS.js";import"./chunk-MEVQH5BX.js";import{E as _e,F as ge,j as me,m as de,v as x,y as E}from"./chunk-DNVA5LVB.js";import{b as N}from"./chunk-SFMGPKFH.js";import{$b as D,$c as pe,Ba as k,Ca as u,D as F,Da as C,Ec as re,Fc as U,G as f,Gc as ae,H as w,Hc as se,I as L,Ic as le,La as Q,Ma as p,Na as h,Nb as q,O as m,Oa as W,P as d,Qa as b,Ra as S,Sa as v,Sb as V,Va as T,aa as s,cb as P,db as B,ka as y,ma as c,rc as ee,sb as X,sc as te,tc as ie,uc as oe,va as o,vb as Y,vc as ne,wa as n,xa as M,xb as Z}from"./chunk-E4UPHNBD.js";import"./chunk-WWX6BADO.js";var Me=()=>[10,15,50,100],Re=()=>["product_name","sku"];function Fe(t,_){t&1&&(o(0,"th"),p(1," \u0645\u0639\u062F\u0644 \u0627\u0644\u0643\u0644\u0641\u0629 "),n())}function Le(t,_){t&1&&(o(0,"th"),p(1," \u0622\u062E\u0631 \u0643\u0644\u0641\u0629 "),n())}function We(t,_){if(t&1&&(o(0,"tr")(1,"th"),p(2,"Code"),n(),o(3,"th"),p(4,"Description"),n(),o(5,"th"),p(6,"Category"),n(),o(7,"th"),p(8,"Brand"),n(),o(9,"th"),p(10,"Qty"),n(),y(11,Fe,2,0,"th",24)(12,Le,2,0,"th",24),o(13,"th"),p(14,"\u062C\u0645\u0644\u0629 \u0627\u0644\u062C\u0645\u0644\u0629"),n(),o(15,"th"),p(16,"\u062C\u0645\u0644\u0629"),n(),o(17,"th"),p(18,"\u0645\u0641\u0631\u0642"),n()()),t&2){let i,r,e=C();s(11),c("ngIf",((i=e.userPermissions())==null?null:i.view_cost)||!1),s(),c("ngIf",((r=e.userPermissions())==null?null:r.view_cost)||!1)}}function Ne(t,_){if(t&1&&(o(0,"td"),p(1),P(2,"currency"),n()),t&2){let i=C().$implicit;s(),W(" ",B(2,1,i.avg_cost_usd)," ")}}function Ue(t,_){if(t&1&&(o(0,"td"),p(1),P(2,"currency"),n()),t&2){let i=C().$implicit;s(),W(" ",B(2,1,i.unit_cost_usd)," ")}}function je(t,_){if(t&1&&(o(0,"tr",25)(1,"td"),p(2),n(),o(3,"td"),p(4),n(),o(5,"td"),p(6),n(),o(7,"td"),p(8),n(),o(9,"td"),p(10),n(),y(11,Ne,3,3,"td",24)(12,Ue,3,3,"td",24),o(13,"td"),p(14),P(15,"currency"),n(),o(16,"td"),p(17),P(18,"currency"),n(),o(19,"td"),p(20),P(21,"currency"),n()()),t&2){let i,r,e=_.$implicit,l=C();c("pSelectableRow",e),s(2),h(e.sku||"---"),s(2),h(e.product_name),s(2),h(e.category_name||"---"),s(2),h(e.brand_name||"---"),s(2),h(e.quantity),s(),c("ngIf",((i=l.userPermissions())==null?null:i.view_cost)||!1),s(),c("ngIf",((r=l.userPermissions())==null?null:r.view_cost)||!1),s(2),W(" ",B(15,11,e.grandwhole_price_usd)," "),s(3),h(B(18,13,e.whole_price_usd)),s(3),h(B(21,15,e.unit_price_usd))}}function ze(t,_){t&1&&(o(0,"tr")(1,"td",26),p(2,"No items yet!"),n()())}var Be=(()=>{class t{constructor(){this.stockService=f(I),this.fb=f(ee),this.confirmationService=f(V),this.stockTransactionsService=f(fe),this.stockCorrectionService=f(Ce),this.printService=f(he),this.authService=f($),this.userPermissions=this.authService.userPermissions,this.products=this.stockService.getProducts(),this.productDialogVisible=!1,this.tableLoading=this.stockService.tableLoading,this.submitItemLoading=this.stockService.submitItemLoading,this.categories=this.stockService.categories,this.brands=this.stockService.brands,this.selectedProduct=this.stockService.selectedItem,this.disposeDialogVisible=!1,this.historyDialogVisible=this.stockTransactionsService.historyDialogVisible,this.historyLoading=this.stockTransactionsService.historyLoading}openItemDialog(i){this.dialogMode=i,this.productDialogVisible=!0}onCreatedProduct(i){this.products.set([...this.products(),i])}onUpdatedProduct(i){this.products.update(r=>{let e=this.products().findIndex(l=>l.product_id===i.product_id);return[...r.slice(0,e),i,...r.slice(e+1)]}),this.selectedProduct.set(i)}deleteselectedProduct(){this.confirmationService.confirm({key:"home",message:"Are you sure you want to delete selected item?",header:"Warning",icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",defaultFocus:"reject",accept:()=>{this.stockService.deleteItem(this.selectedProduct())}})}refreshTable(){this.stockService.getItems()}openDisposeDialog(){this.disposeDialogVisible=!0}disposeItems(i){this.disposeDialogVisible=!1,this.stockService.getItems()}openCorrectStockDialog(){this.stockCorrectionService.stockDialogVisible.set(!0)}onSubmitStockCorrection(i){this.products.update(r=>{let e=this.products().findIndex(l=>l.product_id===i.product_id);return[...r.slice(0,e),i,...r.slice(e+1)]})}fetchHistory(){this.stockTransactionsService.fetchStockHistory(this.selectedProduct().product_id)}closeHistoryDialog(){this.stockTransactionsService.historyDialogVisible.set(!1)}printStock(){this.printService.printStock(this.products())}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=w({type:t,selectors:[["app-stock"]],decls:32,vars:25,consts:[["tableSearch",""],["dt2",""],[1,"grid","m-1"],[1,"col-12"],[1,"grid"],[1,"col-8","md:col-4"],[1,"p-input-icon-left","w-full"],[1,"pi","pi-search"],["pInputText","","type","search","placeholder","Search ...",1,"p-inputtext-sm","w-full",3,"input","value"],[1,"col-4","md:col-1"],["label","Refresh","icon","pi pi-refresh","size","small","styleClass","w-full",3,"onClick","loading"],["label","New","icon","pi pi-plus","severity","success","styleClass","w-full","size","small",3,"onClick"],["label","Print","icon","pi pi-print","size","small","severity","contrast","styleClass","w-full",3,"onClick"],["label","History","size","small","severity","contrast","icon","pi pi-history","styleClass","w-full",3,"onClick","disabled","loading"],["label","Qty","size","small","severity","info","icon","pi pi-wrench","styleClass","w-full",3,"onClick","disabled"],["label","Edit","icon","pi pi-file-edit","size","small","severity","warning","styleClass","w-full",3,"onClick","disabled"],["label","Delete","icon","pi pi-trash","styleClass","w-full","size","small","severity","danger",3,"onClick","disabled"],["styleClass","p-datatable-sm","selectionMode","single","dataKey","product_id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} records",3,"selectionChange","value","selection","paginator","rows","showCurrentPageReport","rowsPerPageOptions","alwaysShowPaginator","globalFilterFields","filterDelay","loading"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"onClose","visible","product_id"],[3,"onSubmit","product_id"],[3,"visibleChange","onCreate","onUpdate","visible","mode","product"],[4,"ngIf"],[3,"pSelectableRow"],["colspan","9"]],template:function(r,e){if(r&1){let l=k();o(0,"div",2)(1,"div",3)(2,"p-card")(3,"div",4)(4,"div",5)(5,"span",6),M(6,"i",7),o(7,"input",8,0),u("input",function(g){m(l);let Ie=Q(25);return d(Ie.filterGlobal(g.target.value,"contains"))}),n()()(),o(9,"div",9)(10,"p-button",10),u("onClick",function(){return m(l),d(e.refreshTable())}),n()(),o(11,"div",9)(12,"p-button",11),u("onClick",function(){return m(l),d(e.openItemDialog("add"))}),n()(),o(13,"div",9)(14,"p-button",12),u("onClick",function(){return m(l),d(e.printStock())}),n()(),o(15,"div",9)(16,"p-button",13),u("onClick",function(){return m(l),d(e.fetchHistory())}),n()(),o(17,"div",9)(18,"p-button",14),u("onClick",function(){return m(l),d(e.openCorrectStockDialog())}),n()(),o(19,"div",9)(20,"p-button",15),u("onClick",function(){return m(l),d(e.openItemDialog("edit"))}),n()(),o(21,"div",9)(22,"p-button",16),u("onClick",function(){return m(l),d(e.deleteselectedProduct())}),n()()(),o(23,"div",3)(24,"p-table",17,1),v("selectionChange",function(g){return m(l),S(e.selectedProduct,g)||(e.selectedProduct=g),d(g)}),y(26,We,19,2,"ng-template",18)(27,je,22,17,"ng-template",19)(28,ze,3,0,"ng-template",20),n()()()()(),o(29,"stock-transactions",21),u("onClose",function(){return m(l),d(e.closeHistoryDialog())}),n(),o(30,"stock-correction",22),u("onSubmit",function(g){return m(l),d(e.onSubmitStockCorrection(g))}),n(),o(31,"product-form",23),v("visibleChange",function(g){return m(l),S(e.productDialogVisible,g)||(e.productDialogVisible=g),d(g)}),u("onCreate",function(g){return m(l),d(e.onCreatedProduct(g))})("onUpdate",function(g){return m(l),d(e.onUpdatedProduct(g))}),n()}if(r&2){let l,a,g=Q(25);s(7),c("value",g.filters.global==null?null:g.filters.global.value),s(3),c("loading",e.tableLoading()),s(6),c("disabled",!e.selectedProduct())("loading",e.historyLoading()),s(2),c("disabled",!e.selectedProduct()),s(2),c("disabled",!e.selectedProduct()),s(2),c("disabled",!e.selectedProduct()),s(2),c("value",e.products()),b("selection",e.selectedProduct),c("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",T(23,Me))("alwaysShowPaginator",!0)("globalFilterFields",T(24,Re))("filterDelay",0)("loading",e.tableLoading()),s(5),c("visible",e.historyDialogVisible())("product_id",(l=e.selectedProduct())==null?null:l.product_id),s(),c("product_id",(a=e.selectedProduct())==null?null:a.product_id),s(),b("visible",e.productDialogVisible),c("mode",e.dialogMode)("product",e.selectedProduct())}},dependencies:[X,x,D,E,U,se,oe,z,H,K,Y],styles:["[_nghost-%COMP%]  .p-card-content{padding:0!important}"]})}}return t})();var Ae=()=>[10,15,50,100];function Ke(t,_){if(t&1){let i=k();o(0,"button",9),u("click",function(){m(i);let e=C();return d(e.openCategoryDialog("add"))}),n()}}function Ge(t,_){if(t&1){let i=k();o(0,"button",10),u("click",function(){m(i);let e=C();return d(e.openCategoryDialog("edit"))}),n(),o(1,"button",11),u("click",function(){m(i);let e=C();return d(e.deleteSelectedCategory())}),n()}if(t&2){let i=C();c("disabled",!i.selectedCategory()),s(),c("disabled",!i.selectedCategory())}}function Qe(t,_){t&1&&(o(0,"tr")(1,"th"),p(2,"Category Name"),n()())}function qe(t,_){if(t&1&&(o(0,"tr",12)(1,"td"),p(2),n()()),t&2){let i=_.$implicit,r=_.rowIndex;c("pReorderableRow",r)("pSelectableRow",i),s(2),h(i.category_name)}}function Je(t,_){t&1&&(o(0,"tr")(1,"td",13),p(2,"No Categories yet!"),n()())}var Ve=(()=>{class t{constructor(){this.stockService=f(I),this.confirmationService=f(V),this.notificationService=f(N),this.categories=this.stockService.categories,this.categoriesLoading=this.stockService.categoriesLoading,this.selectedCategory=this.stockService.selectedCategory,this.categoryDialogVisible=!1}openCategoryDialog(i){this.dialogMode=i,this.categoryDialogVisible=!0}onCreateCategory(i){this.categories.set([...this.categories(),i])}onUpdateCategory(i){let r=this.categories().findIndex(e=>e.category_id===i.category_id);this.categories.update(e=>[...e.slice(0,r),i,...e.slice(r+1)]),this.selectedCategory.set(i)}deleteSelectedCategory(){this.confirmationService.confirm({key:"home",message:`Are you sure that you want to delete "${this.selectedCategory()?.category_name}"?`,header:"Warning",icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",defaultFocus:"reject",accept:()=>{this.stockService.deleteCategory(this.selectedCategory().category_id)}})}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=w({type:t,selectors:[["stock-categories"]],decls:9,vars:12,consts:[["header","Categories"],["styleClass","mb-4 p-2"],["pTemplate","left"],["pTemplate","right"],["selectionMode","single","dataKey","category_id","styleClass","p-datatable-sm","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} records",3,"selectionChange","value","selection","loading","paginator","rows","showCurrentPageReport","rowsPerPageOptions","alwaysShowPaginator"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"visibleChange","onCreate","onUpdate","visible","mode","category"],["pButton","","pRipple","","label","New Category","icon","pi pi-plus",1,"p-button-success","mr-2","p-button-sm",3,"click"],["pButton","","pRipple","","label","Edit","icon","pi pi-file-edit",1,"p-button-warning","p-button-sm","mr-2",3,"click","disabled"],["pButton","","pRipple","","label","Delete","icon","pi pi-trash",1,"p-button-danger","p-button-sm",3,"click","disabled"],[3,"pReorderableRow","pSelectableRow"],["colspan","1"]],template:function(r,e){r&1&&(o(0,"p-panel",0)(1,"p-toolbar",1),y(2,Ke,1,0,"ng-template",2)(3,Ge,2,2,"ng-template",3),n(),o(4,"p-table",4),v("selectionChange",function(a){return S(e.selectedCategory,a)||(e.selectedCategory=a),a}),y(5,Qe,3,0,"ng-template",5)(6,qe,3,3,"ng-template",6)(7,Je,3,0,"ng-template",7),n()(),o(8,"category-form",8),v("visibleChange",function(a){return S(e.categoryDialogVisible,a)||(e.categoryDialogVisible=a),a}),u("onCreate",function(a){return e.onCreateCategory(a)})("onUpdate",function(a){return e.onUpdateCategory(a)}),n()),r&2&&(s(4),c("value",e.categories()),b("selection",e.selectedCategory),c("loading",e.categoriesLoading())("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",T(11,Ae))("alwaysShowPaginator",!0),s(4),b("visible",e.categoryDialogVisible),c("mode",e.dialogMode)("category",e.selectedCategory()))},dependencies:[x,D,E,_e,G,re,j,A]})}}return t})();var Ye=()=>[10,15,50,100];function Ze(t,_){if(t&1){let i=k();o(0,"p-button",9),u("onClick",function(){m(i);let e=C();return d(e.openBrandDialog("add"))}),n()}}function $e(t,_){if(t&1){let i=k();o(0,"p-button",10),u("onClick",function(){m(i);let e=C();return d(e.openBrandDialog("edit"))}),n(),o(1,"p-button",11),u("onClick",function(){m(i);let e=C();return d(e.deleteSelectedBrand())}),n()}if(t&2){let i=C();c("disabled",!i.selectedBrand()),s(),c("disabled",!i.selectedBrand())}}function et(t,_){t&1&&(o(0,"tr")(1,"th"),p(2,"Brand Name"),n()())}function tt(t,_){if(t&1&&(o(0,"tr",12)(1,"td"),p(2),n()()),t&2){let i=_.$implicit;c("pSelectableRow",i),s(2),h(i.brand_name)}}function it(t,_){t&1&&(o(0,"tr")(1,"td"),p(2,"No Brands yet!"),n()())}var De=(()=>{class t{constructor(){this.stockService=f(I),this.confirmationService=f(V),this.notificationService=f(N),this.brandDialogVisible=!1,this.brands=this.stockService.brands,this.brandsLoading=this.stockService.brandsLoading,this.selectedBrand=this.stockService.selectedBrand}openBrandDialog(i){this.dialogMode=i,this.brandDialogVisible=!0}onCreateBrand(i){this.brands.set([...this.brands(),i])}onUpdateBrand(i){let r=this.brands().findIndex(e=>e.brand_id===i.brand_id);this.brands.update(e=>[...e.slice(0,r),i,...e.slice(r+1)]),this.selectedBrand.set(i)}deleteSelectedBrand(){this.confirmationService.confirm({key:"home",message:`Are you sure that you want to delete "${this.selectedBrand()?.brand_name}"?`,header:"Warning",icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",defaultFocus:"reject",accept:()=>{this.stockService.deleteBrand(this.selectedBrand().brand_id)}})}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=w({type:t,selectors:[["stock-brands"]],decls:9,vars:12,consts:[["header","Brands"],["styleClass","mb-4 p-2"],["pTemplate","left"],["pTemplate","right"],["selectionMode","single","dataKey","brand_id","styleClass","p-datatable-sm","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} records",3,"selectionChange","value","selection","loading","paginator","rows","showCurrentPageReport","rowsPerPageOptions","alwaysShowPaginator"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"visibleChange","onCreate","onUpdate","visible","brand","mode"],["label","New Brand","icon","pi pi-plus","styleClass","mr-2","size","small","severity","success",3,"onClick"],["label","Edit","icon","pi pi-file-edit","styleClass","mr-2","severity","warning","size","small",3,"onClick","disabled"],["label","Delete","icon","pi pi-trash","severity","danger","size","small",3,"onClick","disabled"],[3,"pSelectableRow"]],template:function(r,e){r&1&&(o(0,"p-panel",0)(1,"p-toolbar",1),y(2,Ze,1,0,"ng-template",2)(3,$e,2,2,"ng-template",3),n(),o(4,"p-table",4),v("selectionChange",function(a){return S(e.selectedBrand,a)||(e.selectedBrand=a),a}),y(5,et,3,0,"ng-template",5)(6,tt,3,2,"ng-template",6)(7,it,3,0,"ng-template",7),n()(),o(8,"brand-form",8),v("visibleChange",function(a){return S(e.brandDialogVisible,a)||(e.brandDialogVisible=a),a}),u("onCreate",function(a){return e.onCreateBrand(a)})("onUpdate",function(a){return e.onUpdateBrand(a)}),n()),r&2&&(s(4),c("value",e.brands()),b("selection",e.selectedBrand),c("loading",e.brandsLoading())("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",T(11,Ye))("alwaysShowPaginator",!0),s(4),b("visible",e.brandDialogVisible),c("brand",e.selectedBrand())("mode",e.dialogMode))},dependencies:[x,D,E,G,U,j,O]})}}return t})();var xe=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=w({type:t,selectors:[["stock-category-home"]],decls:5,vars:0,consts:[[1,"grid","m-1"],[1,"col-12","md:col-6"]],template:function(r,e){r&1&&(o(0,"div",0)(1,"div",1),M(2,"stock-categories"),n(),o(3,"div",1),M(4,"stock-brands"),n()())},dependencies:[Ve,De]})}}return t})();var nt=[{path:"inventory",data:{breadcrumb:"Inventory"},component:Be,canActivate:[J]},{path:"categories",data:{breadcrumb:"Categories"},component:xe,canActivate:[J]},{path:"dispose",data:{breadcrumb:"Dispose"},component:Se},{path:"settings",data:{breadcrumb:"Settings"},component:ve}],Ee=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=L({type:t})}static{this.\u0275inj=F({imports:[q.forChild(nt),q]})}}return t})();var gi=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=L({type:t})}static{this.\u0275inj=F({imports:[Z,te,ie,Ee,ge,be,ae,pe,me,le,de,ne,we,ue,ce,ye,z,H,K,O,A]})}}return t})();export{gi as StockModule};
