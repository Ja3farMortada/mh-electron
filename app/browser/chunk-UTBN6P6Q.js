import{b as h}from"./chunk-OWTGQR6U.js";import{a as l}from"./chunk-MB5UDTNQ.js";import{b as c,c as n}from"./chunk-UQQFQ63C.js";import{C as o,G as e,ha as a,zb as r}from"./chunk-E4UPHNBD.js";var v=(()=>{class i{constructor(){this.http=e(r),this.api=e(n),this.notificationService=e(c),this.socket=e(l),this.userService=e(h),this.loading_balance=a(!1),this.balance=a({}),this.cashDialogVisible=a(!1),this.getBalance(),this.socket.on("transferAdded",t=>{t==this.userService.databaseId()&&(this.getBalance(),this.notificationService.showSocketMessage("New transfer added!"))})}getBalance(){this.loading_balance.set(!0),this.http.get(`${this.api.host}/balance`).subscribe({next:t=>{this.balance.set(t),this.loading_balance.set(!1)},error:t=>{console.log(t),this.loading_balance.set(!1)}})}submitCash(t){this.http.post(`${this.api.host}/balance/correct`,t).subscribe({next:s=>{this.notificationService.showSuccess(s.message,"home"),this.cashDialogVisible.set(!1),this.getBalance()},error:s=>{this.notificationService.handleError(s.error,"home")}})}static{this.\u0275fac=function(s){return new(s||i)}}static{this.\u0275prov=o({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();export{v as a};
